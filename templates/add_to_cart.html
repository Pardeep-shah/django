{% extends "base.html" %} {% load static %} {% block content %}

<!-- Cart Page Container -->
<div
  class="cart-container"
  style="max-width: 1200px; margin: 50px auto; padding: 0 20px"
>
  <h1
    style="
      font-size: 2.5rem;
      margin-bottom: 30px;
      color: #333;
      text-align: center;
    "
  >
    Your Shopping Cart
  </h1>

  <div style="display: flex; flex-wrap: wrap; gap: 30px">
    <!-- Left Column - Order Summary -->
    {% if cart_items %}
    <div style="width: 350px; flex-shrink: 0">
      <div
        style="
          background: white;
          border-radius: 15px;
          padding: 25px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        "
      >
        <h2
          style="
            margin-top: 0;
            font-size: 1.5rem;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
          "
        >
          Order Summary
        </h2>

        <!-- Shipping Info -->
        <div style="margin: 20px 0">
          <h3 style="font-size: 1.1rem; color: #333; margin-bottom: 10px">
            Shipping Information
          </h3>
          <form style="display: flex; flex-direction: column; gap: 10px">
            <input
              type="text"
              placeholder="Full Name"
              style="
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
                outline: none;
              "
            />
            <input
              type="text"
              placeholder="Address"
              style="
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
                outline: none;
              "
            />
            <input
              type="text"
              placeholder="City"
              style="
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
                outline: none;
              "
            />
            <div style="display: flex; gap: 10px">
              <input
                type="text"
                placeholder="State"
                style="
                  padding: 12px 15px;
                  border: 1px solid #ddd;
                  border-radius: 8px;
                  outline: none;
                  flex: 1;
                "
              />
              <input
                type="text"
                placeholder="ZIP Code"
                style="
                  padding: 12px 15px;
                  border: 1px solid #ddd;
                  border-radius: 8px;
                  outline: none;
                  flex: 1;
                "
              />
            </div>
            <input
              type="text"
              placeholder="Country"
              style="
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
                outline: none;
              "
            />
          </form>
        </div>

        <!-- Promo Code -->
        <div style="margin: 25px 0">
          <h3 style="font-size: 1.1rem; color: #333; margin-bottom: 10px">
            Promo Code
          </h3>
          <div style="display: flex">
            <input
              type="text"
              placeholder="Enter promo code"
              style="
                flex-grow: 1;
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 8px 0 0 8px;
                outline: none;
              "
            />
            <button
              style="
                padding: 0 20px;
                background: #333;
                color: white;
                border: none;
                border-radius: 0 8px 8px 0;
                cursor: pointer;
              "
            >
              Apply
            </button>
          </div>
        </div>

        <!-- Order Total -->
        <div style="border-top: 1px solid #eee; padding-top: 15px">
          <div
            style="
              display: flex;
              justify-content: space-between;
              margin: 10px 0;
            "
          >
            <span style="color: #666">Subtotal</span>
            <span style="font-weight: bold">${{ cart_total }}</span>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              margin: 10px 0;
            "
          >
            <span style="color: #666">Shipping</span>
            <span style="font-weight: bold">$5.00</span>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              margin: 15px 0;
              font-size: 1.1rem;
            "
          >
            <span style="font-weight: bold">Grand Total</span>
            <span style="font-weight: bold; color: #2a2a2a"
              >${{ cart_total|add:5 }}</span
            >
          </div>
        </div>

        <!-- Checkout Button -->
        <a
          href="{% url 'checkout' %}"
          style="
            display: block;
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 20px;
          "
        >
          Proceed to Checkout
        </a>

        <!-- Payment Options -->
        <div style="margin-top: 20px; text-align: center">
          <p style="color: #999; font-size: 0.8rem; margin-bottom: 10px">
            We accept
          </p>
          <div style="display: flex; justify-content: center; gap: 15px">
            <img
              src="{% static 'images/visa.png' %}"
              alt="Visa"
              style="height: 20px"
            />
            <img
              src="{% static 'images/mastercard.png' %}"
              alt="Mastercard"
              style="height: 20px"
            />
            <img
              src="{% static 'images/paypal.png' %}"
              alt="PayPal"
              style="height: 20px"
            />
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    <!-- Right Column - Cart Items -->
    <div style="flex: 1; min-width: 300px">
      <div
        style="
          background: white;
          border-radius: 15px;
          padding: 25px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        "
      >
        {% if cart_items %} {% for item in cart_items %}
        <div
          class="cart-item"
          style="
            display: flex;
            gap: 20px;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
            position: relative;
          "
        >
          <!-- Product Image -->
          <div style="width: 120px; height: 120px; flex-shrink: 0">
            <img
              src="{{ item.product.Product_image.url }}"
              alt="{{ item.product.Product_name }}"
              style="
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 10px;
              "
            />
          </div>

          <!-- Product Details -->
          <div style="flex-grow: 1">
            <h3 style="margin: 0 0 10px; font-size: 1.2rem; color: #333">
              {{ item.product.Product_name }}
            </h3>
            <p style="margin: 5px 0; color: #666; font-size: 0.9rem">
              {{ item.product.Product_description|truncatewords:15 }}
            </p>
            <p style="margin: 5px 0; font-weight: bold; color: #2a2a2a">
              ${{ item.product.Product_price }}
            </p>

            <!-- Quantity Controls -->
            <div style="display: flex; align-items: center; margin-top: 15px">
              <form
                action="{% url 'add_to_cart' item.product.id %}"
                method="post"
                style="display: flex; align-items: center"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  name="action"
                  value="decrease"
                  style="
                    background: #f5f5f5;
                    border: none;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    font-size: 1rem;
                    cursor: pointer;
                  "
                >
                  -
                </button>
                <span
                  style="
                    margin: 0 15px;
                    font-size: 1rem;
                    min-width: 20px;
                    text-align: center;
                  "
                  >{{ item.quantity }}</span
                >
                <button
                  type="submit"
                  name="action"
                  value="increase"
                  style="
                    background: #f5f5f5;
                    border: none;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    font-size: 1rem;
                    cursor: pointer;
                  "
                >
                  +
                </button>
              </form>

              <!-- Remove Item -->
              <form
                action="{% url 'add_to_cart' item.product.id %}"
                method="post"
                style="margin-left: 15px"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  name="action"
                  value="remove"
                  style="
                    background: none;
                    border: none;
                    color: #ff4757;
                    cursor: pointer;
                    font-size: 0.9rem;
                  "
                >
                  Remove
                </button>
              </form>
            </div>
          </div>

          <!-- Subtotal -->
          <div style="text-align: right">
            <p style="font-weight: bold; font-size: 1.1rem; margin: 0">
              ${{ item.subtotal }}
            </p>
          </div>
        </div>
        {% endfor %} {% else %}
        <div style="text-align: center; padding: 40px 0">
          <img
            src="{% static 'images/empty-cart.png' %}"
            alt="Empty Cart"
            style="width: 150px; opacity: 0.7; margin-bottom: 20px"
          />
          <h3 style="color: #666; margin-bottom: 15px">Your cart is empty</h3>
          <a
            href="{% url 'shop_now_page' %}"
            style="
              display: inline-block;
              padding: 10px 25px;
              background: linear-gradient(135deg, #6e8efb, #a777e3);
              color: white;
              border-radius: 50px;
              text-decoration: none;
            "
            >Continue Shopping</a
          >
        </div>
        {% endif %}
      </div>

      {% if cart_items %}
      <!-- Continue Shopping & Update Cart -->
      <div
        style="display: flex; justify-content: space-between; margin-top: 30px"
      >
        <a
          href="{% url 'shop_now_page' %}"
          style="
            padding: 12px 25px;
            border: 1px solid #ddd;
            border-radius: 50px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
          "
        >
          ← Continue Shopping
        </a>
        <a
          href="#"
          style="
            padding: 12px 25px;
            background: #f5f5f5;
            border-radius: 50px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
          "
        >
          Update Cart
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<style>
  /* Hover Effects */
  .cart-item:hover {
    background: #fafafa;
  }

  a:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  button:hover {
    opacity: 0.9;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .cart-container {
      flex-direction: column;
    }

    .order-summary {
      width: 100%;
      margin-top: 30px;
    }

    .cart-item {
      flex-direction: column;
    }

    .cart-item img {
      width: 100%;
      height: auto;
      margin-bottom: 15px;
    }
  }
</style>

{% endblock %}
